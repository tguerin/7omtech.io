---
title: "All-in on Flutter"
subtitle: "Project code name Mowgli: Poker @ Betclic"
date: 2025-08-10 08:00:00
categories: [ Flutter Programming ]
image: /images/flutter-logo.jpeg
tags:

  - Flutter
  - Poker

---

It’s official our talk was declined for Fluttercon 2025. Despite the frustration, I really wanted to share with the Flutter community a crazy project I worked on. I was thinking about making a video, realized that I have a blog I didn't post for more than a year, took my best pencil and started to write down the journey. Let me tell you the incredible story of project code name: Mowgli.

## Preambule

Once upon a time an old young and adventurous Android developer working in Paris decided to go on a world Tour with his girlfriend. We took our first flight on June 22, flash forward 9 month later we were in Kuala Lumpur, Malaysia. I was starting to have my existential crisis, what do I want to do? Where do I want to live? The second question was easy to answer, we really wanted to move to Bordeaux to escape the crazy life of Paris. For the first question, it was a bit harder. Do I want to become a doctor, raise some sheeps in the Pyrénnées or become a fucking blacksmith creating magical swords and going to hunt some monsters!! Well none of the previous options was a fit, after 15 years building Android app I came to a conclusion. I never relaeased an app on the Appstore. I really really (will add another really) didn't want to learn Swift but even more work on XCode. An idea started to pop, hey it's a long time you didn't pay a look to Flutter. In 2 weeks I built and released an app on Play Store and AppStore with ads and premiums subscription. Honestly it took more time to create my AppStore/Playstore account and have my app validated than developing it. With this release, came a great satisfaction I never felt since a long time. I decided I would love to work on a Flutter project (professionaly) on my way back.

## Destiny is sometimes funny

A week after releasing my app, one of my ex-colleague contacted me to take some news and told me he is going to work on a Flutter app, the subject is confidential but the painpoint is that the company is not in Paris but in.... (let you guess)... (add some more for the suspense), Bordeaux! So litteraly, a project was starting in September on a techno I like in a place where I want to live. My interview was scheduled in May, I litteraly did my interview in a small hotel room in South Korea. The only info i could get was the client (Betclic) wanted to build an "app like game". A week later I got the news, I'll start on the project on September. In my spare time after visiting during the day, i decided to learn a bit about Flame and also created a particle animations library to better understand Flutter. Newton was born. (As of today I still have some features i would love to add to this package)

## The beginning

On June 23 It was time to go back home with a mixed of feelings something was ending but we were happy to see our family and start a new life. After spending some time with our close ones, it was time to move in Bordeaux. We managed to find a flat quite quickly and on 4th of September it was my first day. I signed the NDA and finally could know a bit more about the project. Betclic wanted to build a Poker app from ground up in 1 year. Yes you read It correctly 1 year to build an app (front and back) available on iOS, Android, Macos and Windows. In my head I thought, crazy but ok let’s fucking do It. The project had already started to explore what technologies we were going to use and what was doable on Flutter. In September we got the "real" kickstart of the project. We were going to work in another building to preserve the nda and only few people at Betclic were aware of what was going on. For the front team 2 guys were already here "Flute de Paon" and "Pipo" (I'll use Flute names to preserve the anonimity of my colleagues).

Our first feature was... the login. We could log to the app and land to the lobby where the poker offer will at some point be developed. Then we started to implement the game. We decided to not use Flame as it was not really a video game but decided to go for an applike game (game tool kit link). The communication with the game server relies on a websocket so the communication is bidirectonal. We can receive events but also send commands to the game server. We started by implementing the first type of game now called Spin&Rush. It's a short poker game where 3 players compete for the prizepool. In the first version, there was no prizepool, no lobby the only action we could do was check. We then added the call, the raise, the resolution, etc.


<div style="display: flex; gap: 20px; margin: 20px 0;">
  <video width="48%" controls>
    <source src="/images/2025-08-10-mowgli/login.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  
  <video width="48%" controls>
    <source src="/images/2025-08-10-mowgli/check.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

## From app to Framework + Desktop

In October while we were actively working on the core game a question raised, how the app will be released on mobile. We first thought it was a standalone app, but we quicly realized we could end being a framework embedded in the iOS and Android native apps. This consideration had a huge impact as some features are not necessary in mobile as they are handled by the native apps (login, account for example) but are still necessary on Desktop. In one day we went from a single app project to a multi-module project with 2 apps. The framework and the Desktop app that packages only the features they need. We setup melos and followed this architecture:

The goal was to limit interdependency of our modules and end with an acyclic graph of modules when packaging the app.

<a href="/images/2025-08-10-mowgli/architecture.svg" data-lightbox="gallery" data-title="Project Architecture">
  <img src="/images/2025-08-10-mowgli/architecture.svg" alt="Project Architecture" style="width: 200px; height: auto; cursor: pointer;">
</a>

Our main layers were:
  * Utilities: all the non Betclic specific code, the rule of thumb was if we can open-source it it's an utility.
  * Foundations: Non UI core components, mainly to interact with Betclic platform
  * Features: this one is quite self explanatory
  * DSM: hold all the design and assets that are used across our features. It's also in this package where we define reusable components.
  * Composition: is were we start assembling part of our application mainly for routing and theming
  * Apps: final level where we do the final routing touches and some application level configuration (w)


After this decision we got back on track. In November Flutakouliss arrived. In December Santa Claus brought us the Y. The A-team was complete.

## One table to rule them all

One of the main issue when developping a mobile/Desktop app is to have a single design working everywhere. This was really a big deal for our Poker Table experience. To achieve this goal we needed to have a screen reference. For us it was the iPhone 14 screen. Our designer, designed all the Table aspects opponents, hero (where your avatar is and your actions), board etc. Once we had the design, we made it a Specification for the table and we placed every components relative to the table. Thus when we want to display our Poker table on any mobile screen we compute the maximum space the table can take (remove insets, navigation bar etc...). With the maximum size the table can take we compute the best box that preserve our table aspect ratio. When this box is found it is just matter of scaling. We compute at runtime the size of the table by multpliying the scale factor to the Specification. We do the same for the relative position. We ended with 3 spefications (Mobile Portrait, Mobile Landscape, Desktop) each one containing 3 layouts (3-max, 6-max and 9-max). Adding other layouts is totally possible we need to extract the specifications from Figma buth those 9 configurations are enough for us. As of Today, we didn't have a way to automate it even if it's doable.

<div style="display: flex; gap: 20px; margin: 20px 0;">
  <a href="/images/2025-08-10-mowgli/iphone_13mini.png" data-lightbox="gallery" data-title="iPhone 13 mini">
    <img src="/images/2025-08-10-mowgli/iphone_13mini.png" alt="iPhone 13 mini" style="width: 200px; height: auto; cursor: pointer;">
  </a>
  <a href="/images/2025-08-10-mowgli/iphone_14.png" data-lightbox="gallery" data-title="iPhone 14">
    <img src="/images/2025-08-10-mowgli/iphone_14.png" alt="iPhone 14" style="width: 200px; height: auto; cursor: pointer;">
  </a>
  <a href="/images/2025-08-10-mowgli/iphone_16promax.png" data-lightbox="gallery" data-title="iPhone 16">
    <img src="/images/2025-08-10-mowgli/iphone_16promax.png" alt="iPhone 16" style="width: 200px; height: auto; cursor: pointer;">
  </a>
</div>


## Not ready

The deadline of start of August was approaching really quick, and the reality hitted, we were not ready. End of story. We got some extra time and the deadline was finally September. The final decision was December. However the table should be properly animated and we should also be able to play omahas. Variant of the poker with 4 cards in hands and some specific rules.


## From Flutter animate to Rive

Animating widgets is really easy but can be really verbose. Our first animations were done using Flutter animate. We had a file dedicated to store all the animations to apply to any element of the table (opponent cards, chips) and this file was, how to say that, HUGE! Tons of line of code, quite hard to maintain and the animation didn't have this "wouhaou" effect.

In September, we did a bold move and migrated all our animations to rive. Cards, capsule, chips most of our table elements were going to become rive. Rive was really new, the version was 0.12, but promising. With Rive the motion designer can design the animation he wants and provide a state machine we (developer) can interact with. For example, the capsule that contains the name has a state machine that let us decide in wich state the capsule must be (waiting, playing, fold). The only thing we have to do is tell the state we want and the rive animation will take care of the rest. With Rive, we can easily update text at runtime but also images! Our cards became also rive, and we ended having pretty cool animations as you can see in the following video :


Regarding animation it was not the only constraint, animations must be controlled by the game server. As we are a realtime game, if a user had a bad connection it could have less time to play an animation. In that case, we took a really simple approach. The game server tells us how much time we have to play our animations. As a simple example, we cant take the reveal of the Flop. The reveal of the Flops takes 500ms, the game server sends us the end date when the animation should have ended (taking into account an extra delay for latency). So when the Flutter app receive the event to display the Flop it will compute how much time it left before animating. If the time remaining is less than 50% (250ms) we skip to the end otherwise we speed up the animation. We implemented a tailored animation system where a widget can receive animation events for a given target. If we take our BoardWidget that displays the community cards, It will receive animation for BoardTarget. When it receive an animation there is a ratio computed giving the speed. The pseudo code of our animation is as simple as:

```dart
 @override
  Future<void> playAnimation(Animation<KoCenterAnimationType, KoCenterAnimationTarget> animation) async {
    setState(() {
      _viewModel // This a viewmodel from Rive using databinding
        ..colorLevel = animation.type.bountyLevel.toDouble()
        ..triggerStart();
    });
  }
```

Our animation system is responsible to compute and fire animation events with the right speed. The speed is applied directly to the rive Animation. As you can see the result is really cool: 

<div style="display: flex; gap: 20px; margin: 20px 0;">
  <video width="48%" controls>
    <source src="/images/2025-08-10-mowgli/aniamtions.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  
  <video width="48%" controls>
    <source src="/images/2025-08-10-mowgli/ko.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

## Release Hell

The release date was finally decided to be the 9th of December and It was during my holidays. I promise It was not planned. On 9th of December after a planned maintenance in the morning, we did the switch and Mowgli was live. It didn't take a long time before our servers went down. After some days of work, the platform was finally stable. On Front side, we did have some bugs but nothing really important. We were really eager to have some feedbacks. The poker community was really happy as you can see on this image, they loved the product and was really excited:

<a href="/images/2025-08-10-mowgli/feedback.png" data-lightbox="gallery" data-title="Gentle Feedback">
  <img src="/images/2025-08-10-mowgli/feedback.png" alt="Gentle Feedback" style="width: 200px; height: auto; cursor: pointer;">
</a>


Well that's was in my dream, cause in the reality we got a lot of complains. No dark mode, no sounds, the app was crap. The poker community hitted hard on us. It was not the first time I released an app with important design and behavior changes. At zenly we did it twice, twice people were disappointed and angry but twice the number of users exploded right after. When reading this kind of comments, you shouldn't take it personnally and find out what really cause the anger. In our case, people were not happy to lose some features, but the one that were coming over and over was:  dark theme, missing sounds, some bug animations and ability to choose the color of the deck. In less than 2 weeks, all of these features were shipped. That is the power of mastering your code.

## Finally some love

After few weeks, we started to see more and more happy reviews popping up. As expected our userbase grew, grew a lot! Month, after month we were beating previous records: number of users, number of games etc. We started to take some share to our main concurrents that were in the Poker fields for a longer time than us. At Betclic, we really care about what our users are thinking about our products. We have a discord with our most active users so they can report bugs, give feedbacks. As a developer, it’s always interesting to see what our users like doesn’t like or would like to have.


## And now?

We keep adding really cool features that unfortunately I can’t talk about for now. I have so many subjects I could discuss about, how we went frome rive to rive-native, multi-windows, performance, weird crashes, how we managed near monotonic time for our animations. I may write dedicated articles for these subjects. In the meantime I really wanted to share my feeback working with Flutter. 

First, I would like to thanks the Flutter community. It’s really rare to see a community which is so kind. Every people I had the chance to interact with were really motivated and willing to help. This community is also really active, I would love to do this, maybe there is a package doing this? For sure there is already one! My team was also incredible, really dedicated and wanted to create the best Poker app and experience. Flutter also did the job quite well and we managed to have a single codebase for 2 apps and a framework. We still have things we can improve but honestly as of Today no other framework not even KMP is doing the job at the level of Flutter. 

Big up to the Rive team, we had the chance to work closely with them. They are really passionate about what they do and Rive really rock, I invite you to give it a try on your projects.

On the downside, I'm sometime frustrated by the Flutter build tool, I really miss gradle from Android that really can do a good job especially for module variants that I would love to see landed in Flutter somehow. We were frustrated but using some scripting we managed to achieve what we needed. For example, when we build the desktop app we remove mobile specific assets and inverse on mobile. 

Coming from the Android world, I was used to have one big release per year. Having multiple release a Year is Great but one downside is that the First release of Flutter often introduce new bugs. You need to wait 1 patch or 2 before the release to be stable. However we, for now, never ended in a dead end, we could rollback when needed. It’s totally compensated by the fact that Flutter is completely open source. You can even build you own flutter version if necessary. When I worked on Android, I sometime faced bugs I couldn't resolve and there was absolutely nothing you can do about It except finding workarounds.

From our perspective the Windows integration is still lacking the level of quality of MacOs. Windows is (unfortunately) one of the most spreaded OS. I would love to see the Flutter team or any person expert in Windows api took more effort to improve the experience on Windows.

All-in all, as a conclusion, I often read debates about KMP, Flutter or go natives. After 15 years in the tech industry, seeing the rise and the fall of different technologies, the answer is simple and always the same there is and there won't be any silver bullet. Any approach has his downsides and upside but the most important is that the upside outpass the down. In our case Flutter did.

I will dedicate more time to be involved in the Flutter community.

From the deep blue of my heart, I hope you enjoyed this article as much I had when writing it.

Flutterly yours,

Traversiere